% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ducklake.R
\name{ducklake_load_vcf}
\alias{ducklake_load_vcf}
\title{Load VCF into DuckLake (ETL + Registration)}
\usage{
ducklake_load_vcf(
  con,
  table,
  vcf_path,
  extension_path,
  output_path = NULL,
  threads = parallel::detectCores(),
  compression = "zstd",
  row_group_size = 100000L,
  region = NULL,
  columns = NULL,
  overwrite = FALSE
)
}
\arguments{
\item{con}{DuckDB connection with DuckLake attached.}

\item{table}{Target table name (optionally qualified, e.g., "lake.variants").}

\item{vcf_path}{Path/URI to VCF/BCF file.}

\item{extension_path}{Path to bcf_reader.duckdb_extension (required).}

\item{output_path}{Optional Parquet output path. If NULL, uses DuckLake's DATA_PATH.}

\item{threads}{Number of threads for conversion.}

\item{compression}{Parquet compression codec.}

\item{row_group_size}{Parquet row group size.}

\item{region}{Optional region filter (e.g., "chr1:1000-2000").}

\item{columns}{Optional character vector of columns to include.}

\item{overwrite}{Logical, drop existing table first.}
}
\value{
Invisibly returns the path to the created Parquet file.
}
\description{
Converts VCF/BCF to Parquet using the fast \code{bcf_reader} extension, then
registers the Parquet file in a DuckLake catalog table.
}
\details{
This is the recommended function for loading VCF data into DuckLake.
It uses the \code{bcf_reader} DuckDB extension for fast VCF→Parquet conversion,
which is significantly faster than the nanoarrow streaming path.

\strong{Workflow:}
\enumerate{
\item VCF → Parquet via \code{vcf_to_parquet_duckdb()} (bcf_reader)
\item Register Parquet in DuckLake catalog
}
}
\examples{
\dontrun{
# Build extension
ext_path <- bcf_reader_build(tempdir())

# Setup DuckLake
con <- duckdb::dbConnect(duckdb::duckdb())
ducklake_load(con)
ducklake_attach(con, "catalog.ducklake", "/data/parquet/", alias = "lake")
DBI::dbExecute(con, "USE lake")

# Load VCF
ducklake_load_vcf(con, "variants", "sample.vcf.gz", ext_path, threads = 8)

# Query
DBI::dbGetQuery(con, "SELECT CHROM, COUNT(*) FROM variants GROUP BY CHROM")
}
}
